@model TrabajoFinalMulti.ViewModel.AulaPeriodoVM
@{
    ViewData["Title"] = "Registrar Aula";
    Layout = "~/Views/Shared/_Diseño.cshtml";
}

<main class="h-full pb-16 overflow-y-auto">
    <div class="container px-6 mx-auto grid">
        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
            Registrar
        </h2>
        <!-- CTA -
        <!-- General elements -->
        <h4 class="mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300">
            Aula
        </h4>

        <form method="post" asp-action="RegistrarAula" id="registro-form">

            <div class="px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <label asp-for="Aula.Aula_Nombre" class="block  text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Nombre del aula (Color)</span>
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <input asp-for="Aula.Aula_Nombre" class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input"
                               placeholder="Nombre del aula"
                               type="text"
                                />
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 14V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 0 0 0-2h-1v-2a2 2 0 0 0 2-2ZM4 2h2v12H4V2Zm8 16H3a1 1 0 0 1 0-2h9v2Z" />
                            </svg>
                        </div>
                    </div>
                    <span asp-validation-for="Aula.Aula_Nombre" style="color: red;"></span>
                </label>

                <label asp-for="Aula.Aula_Aforo" class="block  text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Aforo</span>
                    <!-- focus-within sets the color for the icon when input is focused -->
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <input asp-for="Aula.Aula_Aforo" class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input"
                               placeholder="Aforo"
                               type="number"
                               value="1"
                               min="1"
                                />
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                    </div>
                    <span asp-validation-for="Aula.Aula_Aforo" style="color: red;"></span>
                </label>


                <label asp-for="Aula.Aula_NivelEducativo" class="block text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Nivel educativo</span>
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <select asp-for="Aula.Aula_NivelEducativo" id="nivel-educativo" class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-select">
                            <option value="">Seleccionar un nivel educativo</option>
                            <option value="Educación Inicial">Educación Inicial</option>
                            <option value="Educación Primaria">Educación Primaria</option>
                            <option value="Educación Secundaria">Educación Secundaria</option>
                        </select>
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M16 14V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 0 0 0-2h-1v-2a2 2 0 0 0 2-2ZM4 2h2v12H4V2Zm8 16H3a1 1 0 0 1 0-2h9v2Z"></path>
                            </svg>
                        </div>
                    </div>
                    <span asp-validation-for="Aula.Aula_NivelEducativo" style="color: red;"></span>
                </label>

                <label asp-for="Aula.Aula_Grado" class="block text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Grado</span>
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <select asp-for="Aula.Aula_Grado" id="grado" class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-select">
                            <option value="">Seleccionar un grado</option>
                            <optgroup label="Educación Inicial" id="grado-inicial">
                                <option value="2 años">2 años</option>
                                <option value="3 años">3 años</option>
                                <option value="4 años">4 años</option>
                                <option value="Inicial">Inicial</option>
                            </optgroup>
                            <optgroup label="Educación Primaria" id="grado-primaria">
                                <option value="Primero">Primero</option>
                                <option value="Segundo">Segundo</option>
                                <option value="Tercero">Tercero</option>
                                <option value="Cuarto">Cuarto</option>
                                <option value="Quinto">Quinto</option>
                                <option value="Sexto">Sexto</option>
                            </optgroup>
                            <optgroup label="Educación Secundaria" id="grado-primaria">
                                <option value="Primero">Primero</option>
                                <option value="Segundo">Segundo</option>
                                <option value="Tercero">Tercero</option>
                                <option value="Cuarto">Cuarto</option>
                                <option value="Quinto">Quinto</option>
                            </optgroup>
                        </select>
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M16 14V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 0 0 0-2h-1v-2a2 2 0 0 0 2-2ZM4 2h2v12H4V2Zm8 16H3a1 1 0 0 1 0-2h9v2Z"></path>
                            </svg>
                        </div>
                    </div>
                    <span asp-validation-for="Aula.Aula_Grado" style="color: red;"></span>
                </label>


                <label asp-for="Aula.Aula_Estado" class="block text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Estado</span>
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <select asp-for="Aula.Aula_Estado" class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-select">
                            <option value="">Seleccione una opción</option>
                            <option value="Disponible">Disponible</option>
                            <option value="No Disponible">No Disponible</option>
                        </select>
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5" aria-hidden="true" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 14V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 0 0 0-2h-1v-2a2 2 0 0 0 2-2ZM4 2h2v12H4V2Zm8 16H3a1 1 0 0 1 0-2h9v2Z" />
                            </svg>
                        </div>
                    </div>
                    <span asp-validation-for="Aula.Aula_Estado" style="color: red;"></span>
                </label>


                <label asp-for="Aula.Periodo_Id" class="block  text-sm">
                    <span class="text-gray-700 dark:text-gray-400">Periodo</span>
                    <div class="relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400">
                        <div class="block w-full pl-10 mt-1 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input">
                            @Html.DropDownListFor(u => u.Aula.Periodo_Id, Model.ListaPeriodos, "--Lista de periodos--",
                            new {@class = "form-control", required = "required"})
                        </div>
                        <div class="absolute inset-y-0 flex items-center ml-3 pointer-events-none">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                    </div>
                </label>

                <div class="mt-4 flex justify-between flex-row flex-wrap mb-4 space-y-4 md:flex-row md:items-end md:space-x-4">
                    <div>
                        <button type="submit" class=" px-4 py-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
                            Registrar Aula
                        </button>
                        <a asp-controller="Administrador" asp-action="ListaAulas" class="px-4 py-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">Regresar</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</main>

<script>
    document.getElementById('nivel-educativo').addEventListener('change', function () {
        var nivelEducativo = this.value;
        var gradoOptions = document.querySelectorAll('#grado optgroup');
        gradoOptions.forEach(function (optgroup) {
            optgroup.style.display = 'none';
        });

        var selectedGradoOptions = document.querySelectorAll('#grado optgroup[label="' + nivelEducativo + '"]');
        selectedGradoOptions.forEach(function (optgroup) {
            optgroup.style.display = 'block';
        });
    });
</script>
<script>
    var nivelEducativoDropdown = document.getElementById('nivel-educativo');
    var gradoDropdown = document.getElementById('grado');

    nivelEducativoDropdown.addEventListener('change', function () {
        var nivelEducativo = this.value;
        var gradoOptions = gradoDropdown.querySelectorAll('optgroup');
        gradoOptions.forEach(function (optgroup) {
            optgroup.style.display = 'none';
        });

        var selectedGradoOptions = gradoDropdown.querySelectorAll('optgroup[label="' + nivelEducativo + '"]');
        selectedGradoOptions.forEach(function (optgroup) {
            optgroup.style.display = 'block';
        });

        // Reset the selected value in the grado dropdown
        gradoDropdown.value = '';
    });
</script>
